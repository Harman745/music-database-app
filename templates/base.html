<!--Done by Yuvraj Singh Bahia 24129212-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Audio Wave{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="{{ url_for('index') }}" class="brand-link">
                    <div class="logo-icon">‚ô™</div>
                    <div class="logo-text">
                        <span class="logo-main">Audio Wave</span>
                        <span class="logo-tagline">Your Music Library</span>
                    </div>
                </a>
            </div>            
            <button class="hamburger" id="hamburger" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <ul class="nav-menu" id="navMenu">
                <li><a href="{{ url_for('index') }}" {% if request.endpoint == 'index' %}class="active"{% endif %}>Home</a></li>
                <li><a href="{{ url_for('artists') }}" {% if request.endpoint == 'artists' or request.endpoint == 'artist_detail' %}class="active"{% endif %}>Artists</a></li>
                <li><a href="{{ url_for('albums') }}" {% if request.endpoint == 'albums' or request.endpoint == 'album_detail' %}class="active"{% endif %}>Albums</a></li>
                <li><a href="{{ url_for('achievements') }}" {% if request.endpoint == 'achievements' %}class="active"{% endif %}>Achievements</a></li>
                {% if session.username %} <!-- checking to see if there is a user logged onto the site-->
                    <li><a href="{{ url_for('library') }}" {% if request.endpoint == 'library' %}class="active"{% endif %}>My Library</a></li>
                    <li class="user-menu">
                        <span class="username-text">{{ session.username }}</span>
                        <a href="{{ url_for('logout') }}" class="btn-logout">Logout</a>
                    </li>
                {% else %}
                    <li class="auth-dropdown">
                        <button class="btn-primary auth-toggle">Account</button>
                        <div class="auth-dropdown-content">
                            <a href="{{ url_for('login') }}">Login</a>
                            <a href="{{ url_for('register') }}">Register</a>
                        </div>
                    </li>
                {% endif %}
            </ul>
            <div class="search-box">
                <form action="{{ url_for('search') }}" method="get">
                    <input type="text" name="q" placeholder="Search music..." value="{{ request.args.get('q', '') }}">
                    <button type="submit">üîç</button>
                </form>
            </div>
        </div>
    </nav>

    <main class="main-content">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="container">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">
                            {{ message }}
                            <button class="alert-close" onclick="this.parentElement.remove()">√ó</button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Audio Wave. Built with Flask, MySQL, HTML & CSS.</p>
            <p>A comprehensive online music database for discovering and managing your music collection.</p>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn" class="scroll-top-btn" onclick="scrollToTop()" title="Go to top">‚Üë</button>

    <script>
        // Scroll to Top Button
        const scrollTopBtn = document.getElementById('scrollTopBtn');
        
        window.onscroll = function() {
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                scrollTopBtn.style.display = 'block';
            } else {
                scrollTopBtn.style.display = 'none';
            }
        };
        
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Account Dropdown Toggle
        document.addEventListener('DOMContentLoaded', function() {
            const authToggle = document.querySelector('.auth-toggle');
            const authDropdown = document.querySelector('.auth-dropdown');
            
            if (authToggle && authDropdown) {
                authToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    authDropdown.classList.toggle('active');
                });
                
                // Close dropdown when clicking outside
                document.addEventListener('click', function(e) {
                    if (!authDropdown.contains(e.target)) {
                        authDropdown.classList.remove('active');
                    }
                });
            }

            // Hamburger Menu Toggle
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('navMenu');
            
            if (hamburger && navMenu) {
                hamburger.addEventListener('click', function() {
                    hamburger.classList.toggle('active');
                    navMenu.classList.toggle('active');
                    document.body.classList.toggle('menu-open');
                });
                
                // Close menu when clicking on a link
                const navLinks = navMenu.querySelectorAll('a');
                navLinks.forEach(function(link) {
                    link.addEventListener('click', function() {
                        hamburger.classList.remove('active');
                        navMenu.classList.remove('active');
                        document.body.classList.remove('menu-open');
                    });
                });
            }

            // Auto-dismiss flash messages after 2 seconds
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                setTimeout(function() {
                    alert.style.opacity = '0';
                    alert.style.transform = 'translateY(-20px)';
                    setTimeout(function() {
                        alert.remove();
                    }, 300);
                }, 2000);
            });
        });
    </script>
</body>
</html>
